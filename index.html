<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>HeyGen Fullscreen Embed</title>
    <style>
      /* Reset del viewport */
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <script>
      !function(window){
        const host = "https://labs.heygen.com";
        const url  = "https://labs.heygen.com/guest/streaming-embed?share=eyJxdWFsaXR5IjoiaGlnaCIsImF2YXRhck5hbWUiOiJLYXR5YV9DaGFpcl9TaXR0aW5nX3B1YmxpYyIsInByZXZpZXdJbWciOiJodHRwczovL2ZpbGVzMi5oZXlnZW4uYWkvYXZhdGFyL3YzL2IxZmY1ZWRiZjk2MjQyZTZhYzk0NjkyMjdkZjQwOTI0XzU1MzYwL3ByZXZpZXdfdGFyZ2V0LndlYnAiLCJuZWVkUmVtb3ZlQmFja2dyb3VuZCI6ZmFsc2UsImtub3dsZWRnZUJhc2VJZCI6IjUyZTA2YWI1NjUzZjQ2NmE4YzM4Y2Q2NjYwNGQzNzMwIiwidXNlcm5hbWUiOiJjOWM2Njc4OTljODQ0N2MzOWRlNWFmZDcxNGM0Yjk3OCJ9&inIFrame=1";

        // 1) crea wrapper full-screen
        const wrapDiv = document.createElement("div");
        wrapDiv.id = "heygen-streaming-embed";
        Object.assign(wrapDiv.style, {
          position:   "fixed",
          top:        "0",
          left:       "0",
          right:      "0",
          bottom:     "0",
          margin:     "0",
          padding:    "0",
          border:     "none",
          boxShadow:  "none",
          overflow:   "hidden",
          zIndex:     "9999"
        });

        // 2) crea container che riempie al 100% il wrapper
        const container = document.createElement("div");
        container.id = "heygen-streaming-container";
        Object.assign(container.style, {
          position:   "absolute",
          top:        "0",
          left:       "0",
          right:      "0",
          bottom:     "0",
          width:      "100%",
          height:     "100%",
          overflow:   "hidden"
        });

        // 3) iframe che riempie tutto il container
        const iframe = document.createElement("iframe");
        iframe.src               = url;
        iframe.allow             = "microphone";
        iframe.allowFullscreen   = true;
        iframe.title             = "HeyGen Avatar";
        Object.assign(iframe.style, {
          border:   "none",
          width:    "100%",
          height:   "100%",
          display:  "block"
        });

        // evento per show/hide interno HeyGen (toggle classi, ma noi giÃ  forziamo lo stile)
        window.addEventListener("message", (e) => {
          if (e.origin === host && e.data?.type === "streaming-embed") {
            if (e.data.action === "init" || e.data.action === "show") {
              wrapDiv.style.display = "block";
            }
            if (e.data.action === "hide") {
              wrapDiv.style.display = "none";
            }
          }
        });

        // 4) monta tutto nel DOM
        container.appendChild(iframe);
        wrapDiv.appendChild(container);
        document.body.appendChild(wrapDiv);
      }(globalThis);
    </script>
  </body>
</html>
